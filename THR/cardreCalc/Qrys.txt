use MOENational

SELECT CenCode, TchSubject1, Medium1, Count(TeachingDetails.NIC) AS AvailableTCH
INTO #TchAll
FROM TeachingDetails 
INNER JOIN TeacherMast ON TeachingDetails.NIC = TeacherMast.NIC
INNER JOIN StaffServiceHistory ON StaffServiceHistory.ID = TeacherMast.CurServiceRef
INNER JOIN CD_CensesNo ON CD_CensesNo.CenCode = StaffServiceHistory.InstCode
GROUP BY CenCode, TchSubject1, Medium1

SELECT * FROM #TchAll

DELETE #TchAll

UPDATE [dbo].[AvaliableTeachers]
   SET [AvailableTch] = (SELECT AvailableTCH FROM #TchAll)